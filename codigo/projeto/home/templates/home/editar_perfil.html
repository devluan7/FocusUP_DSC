{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Editar Perfil - FocusUP</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Poppins:wght@600;700&display=swap"
      rel="stylesheet"
    />
    
    <link rel="stylesheet" href="{% static 'home/css/estilohome.css' %}" />
    <link rel="stylesheet" href="{% static 'home/css/editar_perfil.css' %}?v=3" />
  </head>
  <body>
    
    
    <header class="cabecalho-principal">
      <div class="container-cabecalho">
        
        <a href="{% url 'home:home' %}" class="logo">
          <img src="{% static 'home/img/LogoOFC.png' %}" alt="FocusUP Logo">
        </a>
        
        <div class="menu-desktop-container">
          <nav class="navegacao-principal">
            <ul>
              <li><a href="{% url 'home:home' %}" {% if request.resolver_match.url_name == 'home' %}class="ativo"{% endif %}>Painel</a></li>
              <li><a href="{% url 'home:lista_Tarefas' %}" {% if request.resolver_match.url_name == 'lista_Tarefas' %}class="ativo"{% endif %}>Tarefas</a></li>
              <li><a href="#">Loja</a></li> 
            </ul>
          </nav>
          
          <button class="profile-avatar perfil-foto-container" id="profile-dropdown-trigger" aria-label="Abrir menu do perfil" aria-expanded="false" tabindex="0">
            <img src="https://static.wikia.nocookie.net/naruto/images/d/d7/Naruto_Uzumaki_%28Parte_I_-_Genin%29.png" alt="Avatar do Usuário" class="perfil-foto">
            
            <span class="level-badge level-badge-display">
              {{ user.nivel|default:1 }}
            </span>
          </button>
        </div>

        <button class="botao-menu-mobile" id="botao-menu-mobile" aria-label="Abrir menu" aria-expanded="false">
          <span></span><span></span><span></span>
        </button>
        
      </div>
    </header>

    <div class="profile-dropdown" id="profile-dropdown">
      <ul>
        <li><a href="{% url 'home:editar_perfil' %}" {% if request.resolver_match.url_name == 'editar_perfil' %}class="ativo"{% endif %}>Meu Perfil</a></li> 
        <li><a href="{% url 'home:meu_perfil_focos' %}" {% if request.resolver_match.url_name == 'meu_perfil_focos' %}class="ativo"{% endif %}>Perfil Focos</a></li>
        <li class="dropdown-divisor"><hr></li>
        <li><a href="{% url 'home:logout' %}" class="dropdown-sair">Sair</a></li>
      </ul>
    </div>

    <div class="menu-mobile-overlay" id="menu-mobile-overlay">
      <nav class="navegacao-mobile">
        <ul>
          <li><a href="{% url 'home:home' %}" {% if request.resolver_match.url_name == 'home' %}class="ativo"{% endif %}>Painel</a></li>
          <li><a href="{% url 'home:lista_Tarefas' %}" {% if request.resolver_match.url_name == 'lista_Tarefas' %}class="ativo"{% endif %}>Tarefas</a></li>
          <li><a href="#">Loja</a></li> 
        </ul>
      </nav>
      
      <button class="profile-avatar-mobile perfil-foto-container" id="profile-dropdown-trigger-mobile" aria-label="Abrir menu do perfil" aria-expanded="false" tabindex="0">
        <img src="https://static.wikia.nocookie.net/naruto/images/d/d7/Naruto_Uzumaki_%2C(Parte_I_-_Genin%29.png" alt="Avatar do Usuário" class="perfil-foto">
        <span>{{ user.nome_usuario|default:user.email }}</span>
        
        <span class="level-badge level-badge-display">
          {{ user.nivel|default:1 }}
        </span>
      </button>
      
      <div class="profile-dropdown-mobile" id="profile-dropdown-mobile">
        <ul>
          <li><a href="{% url 'home:editar_perfil' %}" {% if request.resolver_match.url_name == 'editar_perfil' %}class="ativo"{% endif %}>Meu Perfil</a></li>
          <li><a href="{% url 'home:meu_perfil_focos' %}" {% if request.resolver_match.url_name == 'meu_perfil_focos' %}class="ativo"{% endif %}>Perfil Focos</a></li>
          <li class="dropdown-divisor"><hr></li>
          <li><a href="{% url 'home:logout' %}" class="dropdown-sair">Sair</a></li>
        </ul>
      </div>
    </div>
    
    <main class="main_editar_perfil"> 
        <div class="container_form_editar"> 
            {% if messages %}
                <div class="mensagens_django">
                    {% for message in messages %}
                        <div class="alerta alerta_{{ message.tags }}">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
            
            <h1 class="titulo_editar_perfil">Editar Perfil</h1> 
            <p class="subtitulo_editar_perfil">Atualize suas informações pessoais.</p>

            <form class="form_editar_perfil" method="POST" novalidate> 
                {% csrf_token %}

                <div class="campo_formulario">
                    <label for="{{ form.nome.id_for_label }}" class="label_formulario">Nome completo</label>
                    {{ form.nome }} 
                    {% if form.nome.errors %}<div class="erro_campo">{{ form.nome.errors }}</div>{% endif %}
                </div>

                <div class="campo_formulario">
                    <label for="{{ form.nome_usuario.id_for_label }}" class="label_formulario">Nome de usuário</label>
                    {{ form.nome_usuario }} 
                    {% if form.nome_usuario.errors %}<div class="erro_campo">{{ form.nome_usuario.errors }}</div>{% endif %}
                </div>

                <div class="campo_formulario">
                    <label for="{{ form.email.id_for_label }}" class="label_formulario">E-mail</label>
                    {{ form.email }} 
                    {% if form.email.errors %}<div class="erro_campo">{{ form.email.errors }}</div>{% endif %}
                </div>

                <div class="campo_formulario">
                    <label for="{{ form.sexo.id_for_label }}" class="label_formulario">Sexo</label>
                    {{ form.sexo }} 
                    {% if form.sexo.errors %}<div class="erro_campo">{{ form.sexo.errors }}</div>{% endif %}
                </div>

                <div class="campo_formulario">
                    <label for="{{ form.data_nascimento.id_for_label }}" class="label_formulario">Data de nascimento</label>
                    {{ form.data_nascimento }} 
                    {% if form.data_nascimento.errors %}<div class="erro_campo">{{ form.data_nascimento.errors }}</div>{% endif %}
                </div>

                <button type="submit" class="botao_salvar_perfil">Salvar Alterações</button> 
            </form>

            <div class="links_auxiliares_editar_perfil">
                <p class="texto_voltar">
                    <a href="{% url 'home:home' %}" class="link_voltar">Voltar para Home</a>
                </p>
            </div>
        </div>
    </main>
    
    <script type="application/json" id="js-data">
      {
        "resgatarFocoUrl": "{% url 'home:resgatar_foco' %}",
        "csrfToken": "{{ csrf_token }}"
      }
    </script>
    <script src="{% static 'home/js/homejs.js' %}"></script>
    
    <script src="{% static 'home/js/editar_perfil.js' %}?v=3"></script> 
  </body>
</html>