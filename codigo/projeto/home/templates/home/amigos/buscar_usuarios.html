{% extends 'home/base.html' %}
{% load static %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'home/css/estiloamigos.css' %}">
{% endblock %}

{% block content %}
<div class="container-amigos"> 
    <section class="secao"> 
        <h1>Encontrar Amigos</h1>

        <form method="GET" action="{% url 'home:buscar_usuarios' %}" class="form-busca"> 
            <input
                type="text"
                name="q"
                placeholder="Digite o nome de usuário ou nome real"
                value="{{ query }}"
            />
            <button type="submit">Buscar</button> 
        </form>

        <hr /> 

        {% if query %}
            <h2>Resultados para "{{ query }}"</h2>
            {% if resultados %}
                <ul class="lista-resultados"> 
                    {% for usuario_encontrado in resultados %}
                        <li class="resultado-item"> 
                            <span>
                                <strong>{{ usuario_encontrado.nome_usuario }}</strong>
                                {% if usuario_encontrado.nome %}
                                    <small>({{ usuario_encontrado.nome }})</small> 
                                {% endif %}
                            </span>
                            <a href="{% url 'home:enviar_pedido_amizade' usuario_encontrado.pk %}" class="botao-link botao-secundario botao-pequeno">
                                Enviar Pedido
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="sem-resultados">Nenhum usuário encontrado.</p> 
            {% endif %}
        {% else %}
            <p>Digite um nome acima para buscar por novos amigos.</p>
        {% endif %}
    </section>
</div>
{% endblock %}