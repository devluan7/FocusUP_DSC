{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meus Perfis de Foco - FocusUP</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Poppins:wght@600;700&display=swap"
        rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'home/css/estiloperfil.css' %}" />
</head>
<body>
    <header class="cabecalho-principal">
        <div class="container-cabecalho">
            <a href="{% url 'home:home' %}" class="logo">FocusUP</a>
            <nav class="navegacao-principal">
                <ul>
                    <li><a href="{% url 'home:home' %}">Painel</a></li>
                    <li><a href="{% url 'home:lista_Tarefas' %}">Tarefas</a></li>
                    <li>
                        <a href="{% url 'home:meu_perfil' %}" class="ativo">Meu perfil</a>
                    </li>
                    <li><a href="#">Loja</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container-perfil">
        {% if messages %}
            <div class="container-mensagens">
                {% for message in messages %}
                    <div class="mensagem {{ message.tags }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}

        <section class="secao">
            <h2>Meus Perfis Atuais</h2>
            <ul class="lista-perfis">
                {% for perfil in perfis_atuais %}
                    <li class="perfil-item">
                        <h3 class="perfil-nome">{{ perfil.foco_nome|capfirst }}</h3>
                        {% if perfil.detalhes %}
                            <p class="perfil-detalhes">
                                <strong>Observações:</strong> {{ perfil.detalhes }}
                            </p>
                        {% endif %}
                        {% if perfil.dados_especificos %}
                            <div class="perfil-dados-extras">
                                <strong>Detalhes Específicos:</strong>
                                <ul>
                                    {% for chave, valor in perfil.dados_especificos.items %}
                                        <li>{{ chave|capfirst }}: {{ valor }}</li>
                                    {% endfor %} {# Fecha o loop interno for chave, valor #}
                                </ul>
                            </div>
                        {% endif %} {# Fecha o if perfil.dados_especificos #}
                    </li>
                {% empty %} {# Parte do loop for perfil in perfis_atuais #}
                    <li class="perfil-vazio">
                        <p>Você ainda não cadastrou nenhum perfil de foco.</p>
                        <p>Use o formulário abaixo para criar seu primeiro!</p>
                    </li>
                {% endfor %} {# Fecha o loop for perfil in perfis_atuais #}
            </ul>
        </section>

        <section class="secao">
            <h2>Adicionar ou Editar Perfil</h2>
            <form method="POST" id="perfil-foco-form">
                {% csrf_token %}
                <div class="campo-form">
                    {{ form.foco_nome.label_tag }}
                    {{ form.foco_nome }}
                    {{ form.foco_nome.errors }}
                </div>

                <div id="campos-academia" class="campos-especificos">
                    <h4>Detalhes da Academia</h4>
                    <div class="campo-form">
                        {{ form.altura.label_tag }}
                        {{ form.altura }}
                        {{ form.altura.errors }}
                    </div>
                    <div class="campo-form">
                        {{ form.peso.label_tag }}
                        {{ form.peso }}
                        {{ form.peso.errors }}
                    </div>
                    <div class="campo-form">
                        {{ form.nivel_treino.label_tag }}
                        {{ form.nivel_treino }}
                        {{ form.nivel_treino.errors }}
                    </div>
                    <div class="campo-form">
                        {{ form.local_treino.label_tag }}
                        {{ form.local_treino }}
                        {{ form.local_treino.errors }}
                    </div>
                    <div class="campo-form">
                        {{ form.freq_treino.label_tag }}
                        {{ form.freq_treino }}
                        {{ form.freq_treino.errors }}
                    </div>
                    <div class="campo-form">
                        {{ form.objetivo_academia.label_tag }}
                        {{ form.objetivo_academia }}
                        {{ form.objetivo_academia.errors }}
                    </div>
                </div>

                <div class="campo-form">
                    {{ form.detalhes.label_tag }}
                    {{ form.detalhes }}
                    {{ form.detalhes.errors }}
                </div>

                <button type="submit" class="submit-button">Salvar Perfil</button>
            </form>
        </section>
    </div>

    {{ perfis_atuais_dict|json_script:"perfis-data" }}
    <script src="{% static 'home/js/meuperfil.js' %}"></script>
</body>
</html>